22/08/2016
migration meeting
contact Dan S about production/shutdown
- shutdown from the perspective of production
  - 86 work will be finished, genebuilders might be running some pipeline, they're aware they have to use non-faulty HW
  - we're back to staging 1/2, be sure to go back to non-suicidal before shutdown
  - Micheal raised a point: storage is not affected, but how to recover the mount points from faulty machines in case they don't survive? Should we take note of these?
  - lustre warehouse not affected , pipelines can continue safely
- we have?
  - 100TB of clustered file system (lustre, total usage ATMO is 43TB) attached to HX farm. Can use 'our share' of the 5PB Lustre just published
  - 300TB of NFS/medium storage areas (longer term warehousing for lustre's processes backups, currently at 200TB including the flat-file stores)
  - NFS area attached to HX farm (/nfs/software/ensembl ensw rw access only) for software installation (RH7)
  - HW request form sent to request production HW
- we need
  - strategy for moving warehouse
  - DB server move, version strategy? when, who, how?
- timeline for migration, what he need for that to happen, should be in charge, need to set a date and tell the other teams

18/08/2016
==========
prob Dan about production meeting, seems he responds to email
meet Steve in the morning (to become regular, eventually), shutdown recap et al.
- ensembldb transfer going at full speed or DMZ 1G link? ETA, how about warehouse/nfs data move? Mirrors affected only by FTP for shutdown? transferred where? 
- FTP ready for transfer/testing: who/when/how (rsync?) do the transfer, test FTP/HTTP/rsync servers, who/when?
- warehouse: transfer follows after ensembldb, when/who/where? 
- NFS data move: who/when/how?
- projects.ensembl.org available as tarball, what to do?
- anything else?
- shutdown from web perspective: 
  - architecture coping shutdown: 
    - shadowland is for webservers (incl archives)/web LSF to connect to user/hive dbs at EBI, anything else (apart from data transfer), ready?
    - ensembl user/hive dbs (VPN with AWS OK, shadowland/internal network links? for archives/web servers). why was it decided to transfer them first before shutdown, because of suicidal blades? temporary disaster recovery architecture with HH failover
    - web servers: some are on suicidal blades, what happens if something goes wrong? web app components transferred to non suicidal then recreated? can we wait the overhead, has been tested?
    - archives: remain at Sanger, access user/hive at EBI via shadowland?
    - FTP won't be moved before fall: steps?
    - public MySQL: where are they, are they safe? deadline for migration, what need to be done for that to happen?
    - mirrors (AWS?): affected by FTP-provided flat-file loading (e.g. BAM) facility from FUSE mounts, can it be bypassed/done elsewhere wo FTP (strategy?) or do we accept service degradation
  - disaster recovery architecture long-term solutions

migration meeting with Sanger: catch up on how the data and VM migration is going and whether there are any issues
- transferring ensembldb, status? can be used to load the archive DB, public MySQL at EBI when available?
- FTP: internal beta testing enabled for FTP/HTTP/RSYNC, data move by rsync, when?
- HW request by form for production machines, likely to be available just after shutdown, need to know precise dates when production moves (will talk soon to coordinator), pipelines almost fully tested, long-term software environment almost ready, farm/warehouse filesystems ready and accepting/receiving data 
- archives: data moving (ensembldb), 81-85 on hold at the moment (DBA vacation) Pbs. with 67 instance, Luke to further investigate and update on Friday, Dan suggests rsync directories out of running instance to blank one. Asked archive immediately before/after that one, no reply. NFS data move? Mark was to suggest solution (12/07)
- web mainly involved in shutdown: should be almost safe (user/hive at EBI ready? AWS VPN OK, Sanger VPN OK?), data transfer via shadowland (slow)T, nothing can be done about link speed?

logs/milestones by WP: start

17/08/2016
X contact Steve, ask catch up about shutdown 
X enquire Andy about: 
- HW request form (done last week, will likely have after shutdown)
- verify we have 300TB of NFS/medium storage for warehouse (yes, Steve is transferring ensembldb to it)
- FTP: rsync? must be at EBI for shutdown? (mirrors), internal beta testing, who does what and when? data move? need a decision
- meet at some point about RH6/7

16/08/2016
X finish set up new archive server (load data, set networking)
X expand mart server storage (13TB)
X inform Andy about genBlast (redirect to Fergal)
enquire Andy about HW request form and FTP/CVS (meeting at some point about RH6/7)
X catch up with FTP migration details (e! next purchase thread, mainly)
X probe Luke (give reasonable timeline).

15/08/2016
X migration meeting
X set up new main archive server
X Andy Y to be informed about genBlast, got explanation from Thibaut
