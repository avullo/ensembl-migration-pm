07/10/2016
==========
data review

X debug Embassy main archive problems with David

06/10/2016
X probe David Ocana about storage problem (wrote embassycloud)

X probe RT guys about agreement

X ask Steve about public MySQL HW, FTP transfer

data review

05/10/2016
X data review

X catch up on various WP tasks

ask Steve about public MySQL HW, dev environment

ask Dan about involvment in FTP site

04/10/2016
X book room for e!-DBA meeting for Friday

X data review

X complete page about testing EBI pipelines with RH7

X ask Dan if he intends to test production pipelines like the others do

03/10/2016
X inform cloud team (David Ocana) about Embassy storage problems

X data review slides/talk

X process pending migration emails

X RT migration date amendment

29/09/2016
X send email for agreement on RT migration date

X debug ensembldb transfer: seems there are portions of storage which have r/w problems (rsync and ls hang indefinitively) 

X process pending migration emails

data review slides/talk

20/09/2016
involve Dan Staines in FTP

data review slides/talk

organise meeting for warehouse: decide on our general strategy for backups of ensembldb and FTP, ie a replacement for manual copying to /warehouse

19/09/2016
X restart ensembldb rsync to Embassy, request auth from storage team

X copy martdb to Embassy

15/09/2016
X Embassy request form for more memory

14/09/2016
==========
X submit jobs for NFS/ensembldb data transfer to Embassy

X upload 80-85 search instances to Embassy

13/09/2016
X probe Asier Roa about FTP server set up
Will let me know about how to publish, might happen automatically from HX to HH. 

X ask Bronwen about ftp://ftp.ensembl.org/pub/assembly
Pig data could be somehow related to map data from Sanger available in the pre site. It's a result of a collaboration between Sanger and other institutes which has stopped at some point after which every actor proceeded independently of each other. Havana team might know something about it. She doesn't know about mouse. Data could be there because at that time it wasn't submitted to the relevant archives. She will enquire relevant people and will let me know.

X start transferring NFS data to Embassy

12/09/2016
X e! migration meeting

X ask production about archiving old FTP data
- ftp://ftp.ensembl.org/pub/assembly/
- ftp://ftp.ensembl.org/pub/IPI/
don't know what this is and therfore don't now if it can archived away from the FTP site.

X set up port forwarding for EBI-Embassy archive data trasfer? Dan claims there's a simple solution. Can use rsync through a remote firewall, http://chriscase.cc/2011/07/rsync-a-file-through-a-remote-firewall/

X start transferring archive DB data (73-79)

09/09/2016
X ask Steve: "we should see if we can archive some of this - what is assembly/mouse/mgsc_assembly_1 for example?"

X ask Andy HW requisition for production update

X items for e! migration meeting on Monday

08/09/2016
X ask Steve about public MySQL meeting with AndyB (06-09-2016)

X data review slides 

X transfer more OVAs from Sanger

X allocate enough storage for archive DBs

07/09/2016
X catch up with last week

X data review slides, shutdown update

X wp08 milestones

X bootstrap/css for github pages

02/09/2016
X work on Jekyll

01/09/2016
X work on Jekyll

31/08/2016
X work on Jekyll

30/08/2016
X explore github pages with jekyll

26/08/2016
==========
X slides data review

25/08/2016
X instantiate 67 instance as 82 clone

X slides data review

24/08/2016
X meeting with Sanger, shutdown migration catch up: confirmation from systems that they'll be able to source a suitable replacement in a day or two in the event it doesn't come back

X ask Steve:
- user/hive/tools DB should have been ready at EBI, what needs to be done?
- NFS data move, when? Happening now
- FTP data move, when? Will ask a shadoland endpoint next week

X talk with Dan S about production migration plans/shutdown (anytime after 10:30am)

X test ssh reverse tunnelling on Embassy, not being able to make it work. Dan's talking about port forwarding

23/08/2016
X RT migration catch up

user/hive/tools DB at EBI should be ready (pm), ask Steve

X ask Andy if he agrees on production suicidal priority list (include staging1/2 in web live slot?) No need, agreed on Steve's production priority list


22/08/2016
X contact Dan S about production/shutdown
- shutdown from the perspective of production
  - 86 work will be finished, genebuilders might be running some pipeline, they're aware they have to use non-faulty HW
  - we're back to staging 1/2, be sure to go back to non-suicidal before shutdown
	(1) We'll announce that we're shutting down processes on staging-1/2 on Thursdy afternoon and all pipelines need to finish by then
	(2) We'll copy everything from staging-1/2 to ens-staging3 on Thursday afternoon
	(3) We'll cross our fingers that staging-1/2 come back to life, but need confirmation from systems that they'll be able to source a suitable replacement in a day or two in the event it doesn't come back.
  - Micheal raised a point: storage is not affected, but how to recover the mount points from faulty machines in case they don't survive? Should we take note of these?
    That's not a problem, as the disk with data contains the OS as well
  - lustre warehouse not affected , pipelines can continue safely
- we have
  - 100TB of clustered file system (lustre, total usage ATMO is 43TB) attached to HX farm. Can use 'our share' of the 5PB Lustre just published
  - 300TB of NFS/medium storage areas (longer term warehousing for lustre's processes backups, currently at 200TB including the flat-file stores)
  - NFS area attached to HX farm (/nfs/software/ensembl ensw rw access only) for software installation (RH7)
  - HW request form sent to request production HW, available after shutdown
- we need
  - strategy for moving warehouse
  - DB server move, cleaning first?, version strategy? when, who, how?
  - communicate list of servers which will require attention at reboot (Helen Brimmer from ISG deals with e!), ST will probably do that for web including production machines
- timeline for migration, what he needs for that to happen, should be in charge, need to set a date and tell the other teams

X migration meeting

X asana/gaant of FTP start

X steve to receive production HW priority list for shutdown

X allocate extra storage for archive NFS server

19/08/2016
X update HW procurement docs based on confluence

X Sanger migration meeting minutes

X send Steve updates on yesterday's discussion to complete

X ask Andy plan about FTP, what happened to CVS (there's a page on confluence), projects.ensembl.org migration to Jekyll, ask to contribute

work on data review slides, email Paul F 12/08 (ensembl campus) about shutdown

18/08/2016
X prob Dan about production meeting, seems he responds to email. Meet on Monday via Slack

X meet Steve in the morning (to become regular, eventually), shutdown recap et al.
- ensembldb transfer not going at full speed, DMZ 1G link. ETA: middle next week, martdb missing (asked MB 22TB data)
- FTP ready for transfer/testing: who/when/how (rsync?) do the transfer, test FTP/HTTP/rsync servers, who/when? Andy's in charge for that
- warehouse: transfer follows after ensembldb, when/who/where? what need to be done, cleaning?
- NFS data move: who/when/how?
- projects.ensembl.org available as tarball, what to do?
- anything else?
- shutdown from web perspective: 
  - architecture coping shutdown: 
    - shadowland is for webservers (incl archives)/web LSF to connect to user/hive dbs at EBI, anything else (apart from data transfer), ready?
    - ensembl user/hive dbs (VPN with AWS OK, shadowland/internal network links? for archives/web servers). why was it decided to transfer them first before shutdown, because of suicidal blades? temporary disaster recovery architecture with HH failover
    - web servers: some are on suicidal blades, what happens if something goes wrong? web app components transferred to non suicidal then recreated? can we wait the overhead, has been tested?
    - archives: remain at Sanger, access user/hive at EBI via shadowland?
    - FTP won't be moved before fall: steps?
    - public MySQL: where are they, are they safe? deadline for migration, what need to be done for that to happen? old version of Mysql running there, which ones are we going to updgrade to 5.6, and how. if we can do for it, we have a procedure for the production DBs
    - mirrors (AWS?): affected by FTP-provided flat-file loading (e.g. BAM) facility from FUSE mounts, can it be bypassed/done elsewhere wo FTP (strategy?) or do we accept service degradation
    mirrors have a copy of some of the required data (AceDB/VCF files), missing BAM & C. files from regulation/genebuild. Service will be available, graceful degration
  - disaster recovery architecture long-term solutions

X migration meeting with Sanger: catch up on how the data and VM migration is going and whether there are any issues
- archives: data moving (ensembldb), 81-85 on hold at the moment (DBA vacation) Pbs. with 67 instance, Luke to further investigate and update on Friday, Dan suggests rsync directories out of running instance to blank one. Asked archive immediately before/after that one, no reply. NFS data move? Mark was to propose solution (12/07), can possibly use shadowland
  54/67 will need to migrate together since they share a database
Luke's on holiday, Paul to contact him about our issues
- FTP: 75TB storage available, internal beta testing enabled for FTP/HTTP/RSYNC, testing/data move by rsync commence soon
- public MySQL: transferring ensembldb, 31/54TB done, ETA: middle next week, migration timeline: two services/2 servers, request 2 VMs each in HX/HH (fail over), upgrade to 5.6 at EBI, keep MySQL 4. Aiming at e!86 (Sep 20)
  martdb not yet transferred (contacted Martin Burton), need to copy the same way (22TB)
- production:
  - HW request by form for production machines, likely to be available just after shutdown, need to know precise dates when production moves (will talk soon to coordinator)
  - pipeline testing going on: core (~100%), variation (70%), regulation (0%), genebuild (10-25%?), compara ?
  - long-term software environment almost ready
  - farm/warehouse filesystems ready and accepting/receiving data, warehouse data transfer follows ensembldb
- web mainly involved in shutdown: should be almost safe (AWS VPN OK, Sanger VPN OK, user/hive at EBI ready by Monday), web to send a list of webservers which will require attention during shutdown (Helen Brimber)
frontend (Sawston building), www.ensembl.org presents a page with links to the mirrors
once machines are ready, can start switching DNS

X logs/milestones by WP: start

17/08/2016
X contact Steve, ask catch up about shutdown 
X enquire Andy about: 
- HW request form (done last week, will likely have after shutdown)
- verify we have 300TB of NFS/medium storage for warehouse (yes, Steve is transferring ensembldb to it)
- FTP: rsync? must be at EBI for shutdown? (mirrors), internal beta testing, who does what and when? data move? need a decision
- meet at some point about RH6/7

16/08/2016
X finish set up new archive server (load data, set networking)
X expand mart server storage (13TB)
X inform Andy about genBlast (redirect to Fergal)
enquire Andy about HW request form and FTP/CVS (meeting at some point about RH6/7)
X catch up with FTP migration details (e! next purchase thread, mainly)
X probe Luke (give reasonable timeline).

15/08/2016
X migration meeting
X set up new main archive server
X Andy Y to be informed about genBlast, got explanation from Thibaut
